/**
 * (c) 2013-2014 Nive GmbH - www.nive.co
 * 
 * angular-nive v0.7.0
 * http://www.nive.co
 * 
 * License: MIT
 */
"use strict";angular.module("nive.resource",[]),angular.module("nive.services",["nive.resource"]),angular.module("nive",["nive.services"]),angular.module("nive.resource").provider("NiveAPI",function(){var e,t=function(e){return e.data},r=function(t){return e.reject(angular.isObject(t.data)&&t.data.message?t.data.message:"NiveAPI: An unknown error occurred.")};this.successHandler=function(e){return angular.isFunction(e)&&(t=e),t},this.errorHandler=function(e){return angular.isFunction(e)&&(r=e),r},this.$get=["$http","$q",function(n,i){return e=i,{get:function(e,t,r,n){return this.call(e,t,r,"GET",n)},post:function(e,t,r,n){return this.call(e,t,r,"POST",n)},call:function(e,i,u,s,o){s=angular.isString(s)?s:"GET";var a=nive.endpoint.apiUrl(angular.extend({},{name:e,method:i},o||{})),c=n({method:s,url:a,data:u,params:"GET"===s?u:"",responseType:"json"});return c.then(t,r)}}}]}),angular.module("nive.services").factory("NiveDataStorageFactory",["NiveAPI",function(e){var t={},r=function(e){this.options(e)};return r.factory=function(e){return new r(angular.isString(e)?{resource:e}:e)},r.prototype={options:function(e,r){switch(!0){case angular.isString(e):if(!angular.isDefined(r))return t[e];t[e]=r;break;case angular.isObject(e):angular.extend(t,e)}return t},getItem:function(t){return angular.isString(t)&&(t={key:t}),e.get(this.options("resource"),"getItem",t,this.options())},newItem:function(t){return angular.isArray(t)&&(t={items:t}),e.post(this.options("resource"),"newItem",t,this.options())},setItem:function(t){return angular.isArray(t)&&(t={items:t}),e.post(this.options("resource"),"setItem",t,this.options())},removeItem:function(t){return angular.isString(t)&&(t={key:t}),e.post(this.options("resource"),"removeItem",t,this.options())},deleteItem:function(e){return this.removeItem(e)},list:function(t){return e.get(this.options("resource"),"list",t,this.options())},keys:function(t){return e.get(this.options("resource"),"keys",t,this.options())}},r.factory}]),angular.module("nive.services").factory("NiveFileHostFactory",["NiveAPI",function(e){var t={},r=function(e){this.options(e)};return r.factory=function(e){return new r(angular.isString(e)?{resource:e}:e)},r.prototype={options:function(e,r){switch(!0){case angular.isString(e):if(!angular.isDefined(r))return t[e];t[e]=r;break;case angular.isObject(e):angular.extend(t,e)}return t},list:function(t){return angular.isString(t)&&(t={path:t}),e.get(this.options("resource"),"@list",t,this.options())},getItem:function(t){return angular.isString(t)&&(t={path:t}),e.get(this.options("resource"),"@getItem",t,this.options())}},r.factory}]),angular.module("nive.services").provider("NiveUser",function(){var e={resource:"users"};this.options=function(t,r){switch(!0){case angular.isString(t):if(!angular.isDefined(r))return e[t];e[t]=r;break;case angular.isObject(t):angular.extend(e,t)}return e},this.$get=["NiveAPI",function(t){return{signIn:function(r){return t.post(e.resource,"signin",r,e)},signOut:function(){return t.get(e.resource,"signout",null,e)},identity:function(){return t.get(e.resource,"identity",null,e)},name:function(r){return t.get(e.resource,"name",r,e)},profile:function(){return t.get(e.resource,"profile",null,e)},authenticated:function(r){return angular.isArray(r)&&(r={groups:r}),angular.isString(r)&&(r={groups:[r]}),t.get(e.resource,"authenticated",r,e)},signup:function(r){return t.get(e.resource,"signup",r,e)},signup2:function(r){return angular.isString(r)&&(r={token:r}),t.get(e.resource,"signup2",r,e)},update:function(r){return t.get(e.resource,"update",r,e)},updatePassword:function(r){return t.get(e.resource,"updatePassword",r,e)},updateEmail:function(r){return angular.isString(r)&&(r={email:r}),t.get(e.resource,"updateEmail",r,e)},updateEmail2:function(r){return angular.isString(r)&&(r={token:r}),t.get(e.resource,"updateEmail2",r,e)},resetPassword:function(r){return angular.isString()&&(r={identity:r}),t.get(e.resource,"resetPassword",r,e)},resetPassword2:function(r){return t.get(e.resource,"resetPassword2",r,e)}}}]});