/**
 * (c) 2013-2014 Nive GmbH - www.nive.co
 * 
 * angular-nive v0.7.0
 * http://www.nive.co
 * 
 * License: MIT
 */
"use strict";angular.module("nive.resource",[]),angular.module("nive.services",["nive.resource"]),angular.module("nive",["nive.services"]),angular.module("nive.resource").provider("NiveAPI",function(){var e,t=function(e){return e.data},n=function(t){return e.reject(angular.isObject(t.data)&&t.data.message?t.data.message:"NiveAPI: An unknown error occurred.")};this.successHandler=function(e){return angular.isFunction(e)&&(t=e),t},this.errorHandler=function(e){return angular.isFunction(e)&&(n=e),n},this.$get=["$http","$q",function(r,i){return e=i,{get:function(e,t,n,r){return this.call(e,t,n,"GET",r)},post:function(e,t,n,r){return this.call(e,t,n,"POST",r)},call:function(e,i,u,s,o){s=angular.isString(s)?s:"GET";var a=nive.endpoint.apiUrl(angular.extend({},{name:e,method:i},o||{})),c=r({method:s,url:a,data:u,params:"GET"===s?u:"",responseType:"json"});return c.then(t,n)}}}]}),angular.module("nive.services").factory("NiveDataStorageFactory",["NiveAPI",function(e){var t={},n=function(e){this.options(e)};return n.factory=function(e){return new n(angular.isString(e)?{resource:e}:e)},n.prototype={options:function(e,n){switch(!0){case angular.isString(e):if(!angular.isDefined(n))return t[e];t[e]=n;break;case angular.isObject(e):angular.extend(t,e)}return t},getItem:function(t){return angular.isString(t)&&(t={key:t}),e.get(this.options("resource"),"getItem",t,this.options())},newItem:function(t){return angular.isArray(t)&&(t={items:t}),e.post(this.options("resource"),"newItem",t,this.options())},setItem:function(t){return angular.isArray(t)&&(t={items:t}),e.post(this.options("resource"),"setItem",t,this.options())},removeItem:function(t){return angular.isString(t)&&(t={key:t}),e.post(this.options("resource"),"removeItem",t,this.options())},deleteItem:function(e){return this.removeItem(e)},list:function(t){return e.get(this.options("resource"),"list",t,this.options())},keys:function(t){return e.get(this.options("resource"),"keys",t,this.options())}},n.factory}]),angular.module("nive.services").factory("NiveFileHostFactory",["NiveAPI",function(e){var t={},n=function(e){this.options(e)};return n.factory=function(e){return new n(e)},n.prototype={options:function(e,n){switch(!0){case angular.isString(e):if(!angular.isDefined(n))return t[e];t[e]=n;break;case angular.isObject(e):angular.extend(t,e)}return t},list:function(t){return angular.isString(t)&&(t={path:t}),e.get(this.options("name"),"@list",t,this.options())},details:function(t){return angular.isString(t)&&(t={path:t}),e.get(this.options("name"),"@details",t,this.options())},properties:function(t){return angular.isString(t)&&(t={path:t}),e.get(this.options("name"),"@properties",t,this.options())}},n.factory}]),angular.module("nive.services").provider("NiveUser",function(){var e={resource:"users"};this.options=function(t,n){switch(!0){case angular.isString(t):if(!angular.isDefined(n))return e[t];e[t]=n;break;case angular.isObject(t):angular.extend(e,t)}return e},this.$get=["NiveAPI",function(t){return{signIn:function(n){return t.post(e.resource,"signin",n,e)},signOut:function(){return t.get(e.resource,"signout",null,e)},identity:function(){return t.get(e.resource,"identity",null,e)},name:function(n){return t.get(e.resource,"name",n,e)},profile:function(){return t.get(e.resource,"profile",null,e)},authenticated:function(n){return angular.isArray(n)&&(n={groups:n}),angular.isString(n)&&(n={groups:[n]}),t.get(e.resource,"authenticated",n,e)},signup:function(n){return t.get(e.resource,"signup",n,e)},signup2:function(n){return angular.isString(n)&&(n={token:n}),t.get(e.resource,"signup2",n,e)},update:function(n){return t.get(e.resource,"update",n,e)},updatePassword:function(n){return t.get(e.resource,"updatePassword",n,e)},updateEmail:function(n){return angular.isString(n)&&(n={email:n}),t.get(e.resource,"updateEmail",n,e)},updateEmail2:function(n){return angular.isString(n)&&(n={token:n}),t.get(e.resource,"updateEmail2",n,e)},resetPassword:function(n){return angular.isString()&&(n={identity:n}),t.get(e.resource,"resetPassword",n,e)},resetPassword2:function(n){return t.get(e.resource,"resetPassword2",n,e)}}}]});